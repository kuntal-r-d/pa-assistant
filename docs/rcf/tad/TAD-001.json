{
  "tadId": "TAD-001",
  "prdId": "PRD-001",
  "version": "1.0.0",
  "status": "draft",
  "extractedConcerns": {
    "sourceDocuments": {
      "prdId": "PRD-001",
      "prdVersion": "2.0.0",
      "userStoriesId": "PRD-001",
      "userStoriesVersion": "1.0.0",
      "extractedAt": "2026-02-18T10:50:13.235Z"
    },
    "productContext": {
      "productName": "Core Job Assistant MVP",
      "problemStatement": "Remote job seekers waste 15-20 hours/week manually searching across fragmented platforms, resulting in 80% of relevant jobs being missed, 2-5% response rates from generic applications, and 30% of applications lost due to poor tracking. Existing solutions either lack intelligent matching or cost $136/month.",
      "targetUsers": [
        "Remote job seekers (software developers, tech professionals)",
        "Career changers looking for remote opportunities",
        "Freelancers seeking full-time remote positions",
        "International candidates targeting US/UK/EU remote jobs"
      ],
      "scope": {
        "inScope": [
          "Multiple job input methods (URL import, text paste, manual form, basic scraping)",
          "Multiple CV/profile variant management",
          "AI-powered job-candidate matching with customizable preferences",
          "Cover letter and CV generation using hybrid AI (Ollama + Claude)",
          "Content editing and version control",
          "Application lifecycle tracking with Kanban board",
          "In-app notification system",
          "Docker-based local deployment",
          "Error handling with circuit breakers and retry logic"
        ],
        "outOfScope": [
          "LinkedIn integration and stealth scraping",
          "Analytics dashboards and email reports",
          "Backup and disaster recovery features",
          "Cloud sync and automated backup workflows",
          "Interview preparation assistant",
          "Salary negotiation coaching",
          "Multi-user support or team features",
          "Mobile application",
          "Chrome browser extension",
          "Recruiter marketplace or job board creation"
        ]
      }
    },
    "functionalRequirements": [
      {
        "reqId": "REQ-001",
        "title": "Multi-Platform Job Scraping",
        "description": "System shall automatically scrape job listings from multiple platforms (RemoteOK, WeWorkRemotely, Himalayas, Indeed) on a daily schedule, handling rate limits gracefully with circuit breakers and exponential backoff.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires distributed scraping service with platform-specific adapters",
          "Needs circuit breaker pattern implementation for resilience",
          "Requires job queue system for managing scraping tasks",
          "Needs rate limiting and throttling mechanisms",
          "Requires robots.txt compliance checking"
        ]
      },
      {
        "reqId": "REQ-002",
        "title": "Job Data Extraction",
        "description": "System shall extract structured data from job listings including: job title, company name, location, salary (if available), full description, required technologies, posted date, and application URL.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires NLP/text parsing service for unstructured data extraction",
          "Needs structured data schema for job entities",
          "Requires field validation and sanitization",
          "May need ML models for entity recognition",
          "Requires error handling for malformed data"
        ]
      },
      {
        "reqId": "REQ-003",
        "title": "Job Deduplication",
        "description": "System shall identify and remove duplicate job listings across platforms using title+company matching (case-insensitive), keeping the version with the most complete data.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires fuzzy matching algorithms for deduplication",
          "Needs data quality scoring to determine best version",
          "Requires batch processing for deduplication across platforms",
          "Needs efficient indexing for duplicate detection",
          "Requires conflict resolution strategies"
        ]
      },
      {
        "reqId": "REQ-004",
        "title": "Job Normalization",
        "description": "System shall normalize extracted job data including: country name standardization, technology name mapping (React.js → React), salary conversion to USD, and experience level categorization.",
        "category": "Job Discovery",
        "priority": "should",
        "architecturalImplications": [
          "Requires reference data management for normalization rules",
          "Needs currency conversion service/API integration",
          "Requires mapping tables for technology synonyms",
          "Needs data transformation pipeline",
          "Requires validation of normalized data"
        ]
      },
      {
        "reqId": "REQ-005",
        "title": "Job Filtering",
        "description": "System shall filter jobs based on user preferences: target countries (OR logic), technologies (must match ≥1), salary range (min/max), remote-only toggle, and experience level.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires complex query engine with multiple filter criteria",
          "Needs efficient indexing strategy for filter performance",
          "Requires user preference storage and retrieval",
          "Needs real-time filtering capabilities",
          "Requires query optimization for large datasets"
        ]
      },
      {
        "reqId": "REQ-006",
        "title": "CV Upload and Parsing",
        "description": "System shall accept CV uploads in PDF and DOCX formats (max 5MB), extract full text with 95%+ accuracy, and identify technical skills, experience duration, and education.",
        "category": "Intelligent Matching",
        "priority": "must",
        "architecturalImplications": [
          "Requires document parsing service for PDF/DOCX",
          "Needs file upload handling with size validation",
          "Requires NLP service for skill extraction",
          "Needs structured CV data schema",
          "Requires error handling for corrupted files",
          "May need OCR for scanned documents"
        ]
      },
      {
        "reqId": "REQ-007",
        "title": "User Profile Management",
        "description": "System shall allow users to configure job search preferences including: target countries, preferred technologies, salary expectations, experience level, and remote-only preference.",
        "category": "Intelligent Matching",
        "priority": "must",
        "architecturalImplications": [
          "Requires user profile data model and storage",
          "Needs preference validation and constraints",
          "Requires profile versioning for preference changes",
          "Needs efficient profile retrieval for matching",
          "Requires default preference handling"
        ]
      },
      {
        "reqId": "REQ-008",
        "title": "Hybrid Match Scoring",
        "description": "System shall calculate a match score (0-100%) for each job using a hybrid approach: 30% TF-IDF text similarity, 40% skill overlap, 20% experience match, 10% semantic embeddings.",
        "category": "Intelligent Matching",
        "priority": "must",
        "architecturalImplications": [
          "Requires ML pipeline for multiple scoring algorithms",
          "Needs vector database for semantic embeddings",
          "Requires TF-IDF implementation and indexing",
          "Needs weighted scoring aggregation service",
          "Requires batch processing for score calculation",
          "Needs performance optimization for real-time scoring"
        ]
      },
      {
        "reqId": "REQ-009",
        "title": "Skill Gap Analysis",
        "description": "System shall analyze each job to identify: matched skills (in CV AND job), missing skills (in job NOT in CV), and extra skills (in CV NOT in job), with fuzzy matching for synonyms.",
        "category": "Intelligent Matching",
        "priority": "must",
        "architecturalImplications": [
          "Requires skill taxonomy and synonym mapping",
          "Needs set operations for skill comparison",
          "Requires fuzzy matching algorithms",
          "Needs skill extraction from both CV and job descriptions",
          "Requires structured gap analysis data model"
        ]
      },
      {
        "reqId": "REQ-010",
        "title": "AI-Powered Gap Analysis Report",
        "description": "System shall use local LLM (Ollama) to generate detailed gap analysis including: strengths (3-5 points), missing skills (3-5 points), improvement suggestions (3-5 actionable items), and overall assessment.",
        "category": "Intelligent Matching",
        "priority": "should",
        "architecturalImplications": [
          "Requires Ollama LLM integration and hosting",
          "Needs prompt engineering and template management",
          "Requires structured output parsing from LLM",
          "Needs context preparation for LLM input",
          "Requires fallback handling for LLM failures"
        ]
      },
      {
        "reqId": "REQ-011",
        "title": "Cover Letter Generation",
        "description": "System shall generate 3 cover letter variants using local LLM (Ollama): Conservative (professional, formal), Aggressive (bold, confident), and Story-driven (narrative alignment). Each 300-400 words.",
        "category": "Content Generation",
        "priority": "must",
        "architecturalImplications": [
          "Requires multiple prompt templates for different styles",
          "Needs content length validation and control",
          "Requires parallel generation for multiple variants",
          "Needs content versioning and storage",
          "Requires template customization system"
        ]
      },
      {
        "reqId": "REQ-012",
        "title": "CV Tailoring",
        "description": "System shall generate tailored CV versions that reorder bullet points by relevance to the job, add a 'Key Skills Match' section, and highlight matching technologies.",
        "category": "Content Generation",
        "priority": "should",
        "architecturalImplications": [
          "Requires CV structure parsing and manipulation",
          "Needs relevance scoring for CV sections",
          "Requires document generation service",
          "Needs template system for CV formatting",
          "Requires diff tracking for CV changes"
        ]
      },
      {
        "reqId": "REQ-013",
        "title": "Hybrid AI Cost Management",
        "description": "System shall track AI usage (Ollama: unlimited, Claude: budget-limited) and alert users when approaching the monthly budget ($10), defaulting to Ollama-only when budget exceeded.",
        "category": "Content Generation",
        "priority": "should",
        "architecturalImplications": [
          "Requires usage tracking and metering service",
          "Needs cost calculation and budget monitoring",
          "Requires AI service routing based on budget",
          "Needs alert/notification system",
          "Requires fallback mechanism to local AI"
        ]
      },
      {
        "reqId": "REQ-014",
        "title": "Application Status Management",
        "description": "System shall track application lifecycle with statuses: Saved, Reviewing, Applied, Interviewing, Rejected, Offered. Status changes must record timestamps and can only move forward (except Rejected from any).",
        "category": "Application Tracking",
        "priority": "must",
        "architecturalImplications": [
          "Requires state machine for application lifecycle",
          "Needs audit trail for status changes",
          "Requires business rule validation for status transitions",
          "Needs event sourcing for status history",
          "Requires timestamp tracking for all changes"
        ]
      },
      {
        "reqId": "REQ-015",
        "title": "Follow-Up Reminders",
        "description": "System shall automatically send email reminders 7 days after 'Applied' status, with options to snooze (3/7/14 days) or dismiss. Reminders cancelled if status changes to Interviewing/Rejected.",
        "category": "Application Tracking",
        "priority": "must",
        "architecturalImplications": [
          "Requires scheduled job/task system",
          "Needs email service integration",
          "Requires reminder state management",
          "Needs event-driven reminder cancellation",
          "Requires user preference handling for reminders"
        ]
      },
      {
        "reqId": "REQ-016",
        "title": "Job List Dashboard",
        "description": "System shall display discovered jobs in a card layout with match score, technologies, salary, and quick actions. Support sorting by match %, date, salary and filtering by multiple criteria.",
        "category": "User Interface",
        "priority": "must",
        "architecturalImplications": [
          "Requires responsive web UI framework",
          "Needs efficient pagination for large datasets",
          "Requires real-time data updates",
          "Needs client-side filtering and sorting",
          "Requires API design for dashboard data"
        ]
      },
      {
        "reqId": "REQ-017",
        "title": "Job Detail View",
        "description": "System shall display comprehensive job information including full description, requirements checklist (matched/missing), gap analysis, cover letter variants, and tailored CV preview.",
        "category": "User Interface",
        "priority": "must",
        "architecturalImplications": [
          "Requires complex UI components for job details",
          "Needs lazy loading for heavy content",
          "Requires document preview capabilities",
          "Needs real-time content generation",
          "Requires responsive design for various content types"
        ]
      },
      {
        "reqId": "REQ-018",
        "title": "Kanban Application Board",
        "description": "System shall provide a Kanban-style board with columns for each application status, supporting drag-and-drop status changes and showing card count per column.",
        "category": "User Interface",
        "priority": "must",
        "architecturalImplications": [
          "Requires drag-and-drop UI library",
          "Needs real-time board updates",
          "Requires optimistic UI updates",
          "Needs WebSocket or SSE for real-time sync",
          "Requires state synchronization between UI and backend"
        ]
      },
      {
        "reqId": "REQ-019",
        "title": "Daily Automated Scraping",
        "description": "System shall execute automated scraping workflow daily at 8:00 AM via n8n, completing within 60 minutes, with automatic retry on failure and email alert if zero jobs scraped.",
        "category": "Automation",
        "priority": "must",
        "architecturalImplications": [
          "Requires n8n workflow orchestration",
          "Needs cron-based scheduling",
          "Requires workflow monitoring and alerting",
          "Needs timeout handling for long-running tasks",
          "Requires health checks and failure detection"
        ]
      },
      {
        "reqId": "REQ-020",
        "title": "Automated Match Scoring",
        "description": "System shall automatically calculate match scores for all new jobs after daily scraping completes, processing in batches of 10 to prevent resource overload.",
        "category": "Automation",
        "priority": "must",
        "architecturalImplications": [
          "Requires batch processing system",
          "Needs resource management and throttling",
          "Requires job queue for match scoring tasks",
          "Needs progress tracking for batch operations",
          "Requires error handling for batch failures"
        ]
      },
      {
        "reqId": "REQ-021",
        "title": "Circuit Breaker Pattern",
        "description": "System shall implement circuit breakers for each scraper: 3 consecutive failures trigger 1-hour cooldown, health check before scraping, and graceful degradation when platform unavailable.",
        "category": "System Reliability",
        "priority": "must",
        "architecturalImplications": [
          "Requires circuit breaker library/implementation",
          "Needs failure tracking and state management",
          "Requires health check endpoints",
          "Needs graceful degradation strategies",
          "Requires monitoring and alerting for circuit states"
        ]
      },
      {
        "reqId": "REQ-022",
        "title": "Retry Logic with Backoff",
        "description": "System shall implement retry logic with exponential backoff (1s, 2s, 4s, 8s, max 30s) for transient failures, with configurable max retry count (default: 3).",
        "category": "System Reliability",
        "priority": "must",
        "architecturalImplications": [
          "Requires retry mechanism with configurable policies",
          "Needs backoff algorithm implementation",
          "Requires failure classification (transient vs permanent)",
          "Needs retry state tracking",
          "Requires configuration management for retry policies"
        ]
      },
      {
        "reqId": "REQ-028",
        "title": "Manual Job URL Import",
        "description": "System shall accept manual job URL imports from any platform, automatically fetch and extract job details, normalize through standard pipeline, and handle failed/blocked URLs gracefully with error messages.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires generic web scraping service",
          "Needs URL validation and sanitization",
          "Requires headless browser for dynamic content",
          "Needs error handling for blocked/failed requests",
          "Requires integration with existing normalization pipeline"
        ]
      },
      {
        "reqId": "REQ-029",
        "title": "Manual Job Description Paste",
        "description": "System shall accept raw job description text, use NLP/AI to parse and extract structured fields, enter parsed data through normalization pipeline, and allow user review and correction of parsed fields before saving.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires NLP service for text parsing",
          "Needs structured data extraction from unstructured text",
          "Requires user interface for data review/correction",
          "Needs confidence scoring for extracted fields",
          "Requires integration with normalization pipeline"
        ]
      },
      {
        "reqId": "REQ-030",
        "title": "Manual Job Form Entry",
        "description": "System shall provide structured form for manual job entry with comprehensive fields, serving as fallback when URL import or text paste don't capture details correctly.",
        "category": "Job Discovery",
        "priority": "must",
        "architecturalImplications": [
          "Requires form validation and data entry UI",
          "Needs structured job data model",
          "Requires field validation and constraints",
          "Needs integration with job processing pipeline",
          "Requires user-friendly form design"
        ]
      },
      {
        "reqId": "REQ-031",
        "title": "Multiple CV/Profile Variants",
        "description": "System shall support multiple CV variants, independently parse each variant to create separate skill profiles, allow user selection of CV variant for specific job matching, and enable independent CRUD operations on variants.",
        "category": "Intelligent Matching",
        "priority": "must",
        "architecturalImplications": [
          "Requires multi-variant data model for CVs",
          "Needs variant-specific skill extraction",
          "Requires variant selection UI/API",
          "Needs independent processing pipelines per variant",
          "Requires variant management interface"
        ]
      },
      {
        "reqId": "REQ-032",
        "title": "Match Preference Customization",
        "description": "System shall allow user definition of matching preference weights across dimensions, save preferences to user profile, support preference presets, and reflect user preferences in match scores.",
        "category": "Intelligent Matching",
        "priority": "should",
        "architecturalImplications": [
          "Requires configurable scoring algorithm",
          "Needs preference storage and retrieval",
          "Requires preset management system",
          "Needs dynamic score calculation based on preferences",
          "Requires preference validation and constraints"
        ]
      },
      {
        "reqId": "REQ-033",
        "title": "Content Editor and Versioning",
        "description": "System shall provide rich text editor for generated content, create new version on each save while preserving previous versions, support version history viewing, comparison, and reversion, and link content versions to specific jobs.",
        "category": "Content Generation",
        "priority": "must",
        "architecturalImplications": [
          "Requires rich text editor component",
          "Needs version control system for content",
          "Requires diff/comparison algorithms",
          "Needs content-job relationship tracking",
          "Requires version history storage and retrieval"
        ]
      },
      {
        "reqId": "REQ-034",
        "title": "Manual Application Status Trigger",
        "description": "System shall provide explicit user action to mark job as 'Applied', capture application metadata, trigger follow-up reminder scheduling, automatically move applied jobs to 'Applied' column in Kanban board, and support manual status changes.",
        "category": "Application Tracking",
        "priority": "must",
        "architecturalImplications": [
          "Requires explicit action UI components",
          "Needs metadata capture and storage",
          "Requires event-driven reminder triggering",
          "Needs real-time UI updates for status changes",
          "Requires audit trail for manual status changes"
        ]
      },
      {
        "reqId": "REQ-035",
        "title": "In-App Notification System",
        "description": "System shall provide notification center in dashboard, support multiple notification types, maintain dismissible notifications with read/unread status, provide notification preferences, and persist notifications until dismissed.",
        "category": "User Interface",
        "priority": "must",
        "architecturalImplications": [
          "Requires notification storage and management system",
          "Needs real-time notification delivery",
          "Requires notification preference management",
          "Needs notification UI components",
          "Requires event-driven notification generation"
        ]
      }
    ],
    "nonFunctionalRequirements": [
      {
        "reqId": "REQ-023",
        "title": "Docker Containerization",
        "category": "performance",
        "targets": [
          "Single docker-compose up command to start",
          "Reproducible deployment across environments"
        ],
        "constraints": [
          "Must use pnpm workspaces monorepo architecture",
          "Containers: api-server, job-crawler, web-ui, PostgreSQL, Redis, Ollama, LiteLLM, n8n"
        ],
        "architecturalImplications": [
          "Requires containerized microservices architecture",
          "Needs service discovery and inter-service communication",
          "Requires container orchestration with Docker Compose",
          "Needs shared volume management for data persistence",
          "Requires network configuration for service communication"
        ]
      },
      {
        "reqId": "OBJ-001",
        "title": "Job Search Time Reduction",
        "category": "performance",
        "targets": [
          "≤3 hours/week job search time",
          "80% reduction from current 15 hours/week"
        ],
        "constraints": [
          "Must maintain quality of job discovery",
          "User experience must be intuitive"
        ],
        "architecturalImplications": [
          "Requires highly efficient automated job discovery",
          "Needs fast job matching and filtering algorithms",
          "Requires optimized user interfaces for quick decision making",
          "Needs batch processing for time-consuming operations",
          "Requires caching strategies for frequently accessed data"
        ]
      },
      {
        "reqId": "OBJ-002",
        "title": "Job Discovery Volume",
        "category": "scalability",
        "targets": [
          "≥200 jobs/week discovery",
          "4x increase from current 50 jobs/week"
        ],
        "constraints": [
          "Must respect platform rate limits",
          "Must maintain data quality"
        ],
        "architecturalImplications": [
          "Requires scalable scraping infrastructure",
          "Needs efficient data processing pipelines",
          "Requires robust deduplication at scale",
          "Needs distributed scraping across multiple platforms",
          "Requires data storage optimization for large volumes"
        ]
      },
      {
        "reqId": "OBJ-003",
        "title": "Application Response Rate",
        "category": "performance",
        "targets": [
          "≥10% application response rate",
          "2-5x improvement from current 2-5%"
        ],
        "constraints": [
          "Must maintain application quality",
          "Must not compromise user privacy"
        ],
        "architecturalImplications": [
          "Requires sophisticated matching algorithms",
          "Needs high-quality content generation",
          "Requires A/B testing capabilities for optimization",
          "Needs analytics for response rate tracking",
          "Requires personalization at scale"
        ]
      },
      {
        "reqId": "OBJ-004",
        "title": "Cost Management",
        "category": "performance",
        "targets": [
          "<$5/month AI API budget",
          "Zero infrastructure cost"
        ],
        "constraints": [
          "Must use local LLMs for most tasks",
          "Must track and limit API usage"
        ],
        "architecturalImplications": [
          "Requires local AI model hosting and management",
          "Needs cost tracking and budget enforcement",
          "Requires intelligent routing between local and cloud AI",
          "Needs resource optimization for local deployment",
          "Requires usage monitoring and alerting"
        ]
      },
      {
        "reqId": "CON-001",
        "title": "Memory Constraints",
        "category": "performance",
        "targets": [
          "Must run on 8GB RAM minimum"
        ],
        "constraints": [
          "Ollama 4GB, PostgreSQL 1GB, Chromium 1.5GB, n8n 512MB, Redis 256MB, API 256MB, LiteLLM 256MB, Web UI 128MB",
          "Memory monitoring at 80%/90% thresholds"
        ],
        "architecturalImplications": [
          "Requires memory-efficient architecture design",
          "Needs resource monitoring and alerting",
          "Requires memory optimization for each service",
          "Needs graceful degradation under memory pressure",
          "Requires careful model selection for LLM (7B quantized max)"
        ]
      },
      {
        "reqId": "REQ-019-NFR",
        "title": "Scraping Performance",
        "category": "performance",
        "targets": [
          "Daily scraping completes within 60 minutes"
        ],
        "constraints": [
          "Must handle multiple platforms concurrently",
          "Must respect rate limits"
        ],
        "architecturalImplications": [
          "Requires parallel processing capabilities",
          "Needs efficient resource utilization",
          "Requires timeout handling and circuit breakers",
          "Needs performance monitoring and optimization",
          "Requires scalable task scheduling"
        ]
      },
      {
        "reqId": "REQ-006-NFR",
        "title": "CV Parsing Accuracy",
        "category": "reliability",
        "targets": [
          "95%+ accuracy for text extraction from PDF/DOCX"
        ],
        "constraints": [
          "Max 5MB file size",
          "Support for PDF and DOCX formats"
        ],
        "architecturalImplications": [
          "Requires robust document parsing libraries",
          "Needs error handling for corrupted files",
          "Requires validation of extraction accuracy",
          "May need multiple parsing strategies for fallback",
          "Requires performance optimization for large files"
        ]
      }
    ],
    "securityRequirements": [
      {
        "reqId": "REQ-024",
        "title": "Local Data Storage",
        "securityDomain": "dataProtection",
        "requirements": [
          "All user data (CV, preferences, applications) stored locally in PostgreSQL",
          "No external transmission except optional Claude API calls"
        ],
        "complianceFrameworks": [
          "Privacy-first architecture"
        ],
        "architecturalImplications": [
          "Requires local database encryption at rest",
          "Needs secure local data access controls",
          "Requires data isolation for single-user deployment",
          "Needs backup and recovery for local data",
          "Requires secure API communication for external calls only"
        ]
      },
      {
        "reqId": "REQ-025",
        "title": "API Key Management",
        "securityDomain": "authentication",
        "requirements": [
          "Store API keys in environment variables",
          "Never store keys in code or logs",
          "Provide .env.example with documentation"
        ],
        "complianceFrameworks": [],
        "architecturalImplications": [
          "Requires secure environment variable management",
          "Needs key rotation capabilities",
          "Requires logging sanitization to prevent key leakage",
          "Needs secure key validation and error handling",
          "Requires documentation for secure setup"
        ]
      },
      {
        "reqId": "REQ-026",
        "title": "Single-User Security Model",
        "securityDomain": "authentication",
        "requirements": [
          "No user authentication required for localhost connections",
          "Internal service-to-service communication uses environment-based shared secrets",
          "Local deployment trusts localhost connections"
        ],
        "complianceFrameworks": [],
        "architecturalImplications": [
          "Requires network-based access control (localhost only)",
          "Needs secure inter-service communication",
          "Requires environment-based secret management",
          "Needs protection against network-based attacks",
          "Requires secure service binding (localhost only)"
        ]
      },
      {
        "reqId": "CON-003",
        "title": "Legal Compliance",
        "securityDomain": "compliance",
        "requirements": [
          "Must respect job board Terms of Service",
          "Implement rate limiting",
          "Respect robots.txt"
        ],
        "complianceFrameworks": [
          "Terms of Service compliance"
        ],
        "architecturalImplications": [
          "Requires robots.txt parsing and compliance",
          "Needs rate limiting implementation per platform",
          "Requires user-agent management",
          "Needs request throttling and backoff",
          "Requires legal compliance monitoring"
        ]
      }
    ],
    "technicalConstraints": [
      {
        "reqId": "CON-002",
        "title": "Budget Constraints",
        "constraintType": "platform",
        "constraint": "Zero infrastructure cost, $5/month AI budget",
        "rationale": "Cost control for personal use application",
        "architecturalImplications": [
          "Must use local deployment only",
          "Requires cost-effective AI service selection",
          "Needs usage tracking and budget enforcement",
          "Requires local resource optimization",
          "Must avoid cloud services with ongoing costs"
        ]
      },
      {
        "reqId": "CON-004",
        "title": "Privacy Constraints",
        "constraintType": "deployment",
        "constraint": "All user data must stay local",
        "rationale": "Privacy-first architecture requirement",
        "architecturalImplications": [
          "Prohibits cloud storage solutions",
          "Requires local database deployment",
          "Needs local backup strategies",
          "Requires local processing for sensitive operations",
          "Must minimize external API dependencies"
        ]
      },
      {
        "reqId": "REQ-027",
        "title": "TypeScript Monorepo Architecture",
        "constraintType": "framework",
        "constraint": "Must use pnpm workspaces, TypeScript strict mode, specific directory structure",
        "rationale": "Code organization, type safety, and future microservice extraction",
        "architecturalImplications": [
          "Requires monorepo build and deployment strategies",
          "Needs shared package management across services",
          "Requires TypeScript compilation and type checking",
          "Needs clear package boundaries for future extraction",
          "Requires consistent tooling across packages"
        ]
      }
    ],
    "externalIntegrations": [
      {
        "name": "RemoteOK API",
        "type": "api",
        "direction": "outbound",
        "protocol": "REST",
        "dataExchanged": [
          "Job listings",
          "Job details",
          "Company information"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-002"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "Rate limiting compliance",
          "robots.txt respect",
          "User-agent management"
        ]
      },
      {
        "name": "WeWorkRemotely Scraping",
        "type": "api",
        "direction": "outbound",
        "protocol": "HTTP",
        "dataExchanged": [
          "Job listings",
          "Job descriptions",
          "Application URLs"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-002"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "Terms of service compliance",
          "Rate limiting",
          "Circuit breaker protection"
        ]
      },
      {
        "name": "Himalayas Job Board",
        "type": "api",
        "direction": "outbound",
        "protocol": "HTTP",
        "dataExchanged": [
          "Remote job listings",
          "Company profiles",
          "Job requirements"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-002"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "Scraping ethics compliance",
          "Request throttling",
          "Error handling"
        ]
      },
      {
        "name": "Indeed Job Scraping",
        "type": "api",
        "direction": "outbound",
        "protocol": "HTTP",
        "dataExchanged": [
          "Job postings",
          "Salary information",
          "Location data"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-002"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "Anti-bot detection handling",
          "IP rotation considerations",
          "Legal compliance"
        ]
      },
      {
        "name": "Anthropic Claude API",
        "type": "thirdPartyService",
        "direction": "outbound",
        "protocol": "REST",
        "dataExchanged": [
          "Job descriptions",
          "CV content",
          "Generated cover letters",
          "Gap analysis reports"
        ],
        "relatedReqs": [
          "REQ-010",
          "REQ-011",
          "REQ-013"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "API key security",
          "Data privacy",
          "Usage tracking",
          "Cost management"
        ]
      },
      {
        "name": "Ollama Local LLM",
        "type": "api",
        "direction": "outbound",
        "protocol": "REST",
        "dataExchanged": [
          "Prompts",
          "Generated content",
          "Analysis results"
        ],
        "relatedReqs": [
          "REQ-010",
          "REQ-011",
          "REQ-029"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "Local network security",
          "Resource management",
          "Model security"
        ]
      },
      {
        "name": "Email Service",
        "type": "thirdPartyService",
        "direction": "outbound",
        "protocol": "SMTP",
        "dataExchanged": [
          "Follow-up reminders",
          "System alerts",
          "Notification emails"
        ],
        "relatedReqs": [
          "REQ-015",
          "REQ-019"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "SMTP authentication",
          "Email content privacy",
          "Rate limiting"
        ]
      },
      {
        "name": "Currency Conversion API",
        "type": "api",
        "direction": "outbound",
        "protocol": "REST",
        "dataExchanged": [
          "Currency rates",
          "Salary conversions"
        ],
        "relatedReqs": [
          "REQ-004"
        ],
        "relatedStories": [],
        "securityConsiderations": [
          "API reliability",
          "Rate limiting",
          "Data accuracy"
        ]
      },
      {
        "name": "Email Service Integration",
        "type": "thirdPartyService",
        "direction": "outbound",
        "protocol": "SMTP",
        "dataExchanged": [
          "follow-up reminders",
          "scraping alerts",
          "application deadline notifications"
        ],
        "relatedReqs": [
          "REQ-015",
          "REQ-019",
          "REQ-035"
        ],
        "relatedStories": [
          "US-085",
          "US-086",
          "US-087",
          "US-117",
          "US-202"
        ],
        "securityConsiderations": [
          "email credentials protection",
          "rate limiting to prevent spam"
        ]
      },
      {
        "name": "Ollama Local LLM Service",
        "type": "api",
        "direction": "outbound",
        "protocol": "HTTP/REST",
        "dataExchanged": [
          "resume data",
          "job descriptions",
          "gap analysis requests",
          "cover letter generation"
        ],
        "relatedReqs": [
          "REQ-010",
          "REQ-011",
          "REQ-029"
        ],
        "relatedStories": [
          "US-057",
          "US-063",
          "US-161"
        ],
        "securityConsiderations": [
          "local deployment only",
          "no external data transmission"
        ]
      },
      {
        "name": "Claude API Service",
        "type": "thirdPartyService",
        "direction": "outbound",
        "protocol": "HTTP/REST",
        "dataExchanged": [
          "AI processing requests",
          "token usage data"
        ],
        "relatedReqs": [
          "REQ-013",
          "REQ-024"
        ],
        "relatedStories": [
          "US-073",
          "US-074",
          "US-075",
          "US-139"
        ],
        "securityConsiderations": [
          "API key protection",
          "budget monitoring",
          "optional usage only"
        ]
      },
      {
        "name": "n8n Workflow Orchestration",
        "type": "api",
        "direction": "bidirectional",
        "protocol": "HTTP/REST",
        "dataExchanged": [
          "workflow triggers",
          "scraping job status",
          "scheduling data"
        ],
        "relatedReqs": [
          "REQ-019",
          "REQ-020"
        ],
        "relatedStories": [
          "US-115",
          "US-116",
          "US-119"
        ],
        "securityConsiderations": [
          "internal service authentication",
          "workflow execution monitoring"
        ]
      },
      {
        "name": "Job Platform Web Scraping",
        "type": "api",
        "direction": "outbound",
        "protocol": "HTTP/HTTPS",
        "dataExchanged": [
          "job listings",
          "company data",
          "posting metadata"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-021",
          "REQ-028"
        ],
        "relatedStories": [
          "US-002",
          "US-003",
          "US-004",
          "US-005",
          "US-154"
        ],
        "securityConsiderations": [
          "rate limiting",
          "circuit breaker protection",
          "anti-bot detection handling"
        ]
      }
    ],
    "dataArchitectureConcerns": {
      "entities": [
        {
          "name": "Job",
          "description": "Job listing with all extracted and normalized data",
          "estimatedVolume": "thousands",
          "accessPatterns": [
            "read-heavy",
            "search-intensive",
            "batch-processing"
          ],
          "relatedReqs": [
            "REQ-001",
            "REQ-002",
            "REQ-003",
            "REQ-004",
            "REQ-005"
          ]
        },
        {
          "name": "UserProfile",
          "description": "User preferences, skills, and job search configuration",
          "estimatedVolume": "single record",
          "accessPatterns": [
            "read-heavy",
            "occasional-updates"
          ],
          "relatedReqs": [
            "REQ-007",
            "REQ-032"
          ]
        },
        {
          "name": "CVVariant",
          "description": "Multiple CV versions with parsed skills and content",
          "estimatedVolume": "dozens",
          "accessPatterns": [
            "read-heavy",
            "version-controlled"
          ],
          "relatedReqs": [
            "REQ-006",
            "REQ-031"
          ]
        },
        {
          "name": "Application",
          "description": "Job application tracking with status and metadata",
          "estimatedVolume": "hundreds",
          "accessPatterns": [
            "read-heavy",
            "status-updates",
            "time-series"
          ],
          "relatedReqs": [
            "REQ-014",
            "REQ-034"
          ]
        },
        {
          "name": "GeneratedContent",
          "description": "Cover letters and tailored CVs with version history",
          "estimatedVolume": "thousands",
          "accessPatterns": [
            "version-controlled",
            "read-heavy"
          ],
          "relatedReqs": [
            "REQ-011",
            "REQ-012",
            "REQ-033"
          ]
        },
        {
          "name": "MatchScore",
          "description": "Job-candidate match scores with breakdown",
          "estimatedVolume": "thousands",
          "accessPatterns": [
            "read-heavy",
            "batch-calculated"
          ],
          "relatedReqs": [
            "REQ-008",
            "REQ-020"
          ]
        },
        {
          "name": "Notification",
          "description": "In-app notifications and reminders",
          "estimatedVolume": "hundreds",
          "accessPatterns": [
            "time-series",
            "read-heavy"
          ],
          "relatedReqs": [
            "REQ-015",
            "REQ-035"
          ]
        },
        {
          "name": "ScrapingJob",
          "description": "Scraping task status and results",
          "estimatedVolume": "hundreds",
          "accessPatterns": [
            "time-series",
            "monitoring"
          ],
          "relatedReqs": [
            "REQ-019",
            "REQ-021"
          ]
        }
      ],
      "storageRequirements": [
        {
          "type": "relational",
          "rationale": "Complex relationships between jobs, applications, and user data require ACID transactions",
          "candidates": [
            "PostgreSQL"
          ]
        },
        {
          "type": "cache",
          "rationale": "Caching for frequently accessed match scores and job data",
          "candidates": [
            "Redis"
          ]
        },
        {
          "type": "blob",
          "rationale": "Storage for uploaded CV files and generated documents",
          "candidates": [
            "Local filesystem",
            "PostgreSQL BLOB"
          ]
        },
        {
          "type": "document",
          "rationale": "Flexible storage for job descriptions and generated content",
          "candidates": [
            "PostgreSQL JSONB"
          ]
        }
      ],
      "dataFlows": [
        {
          "from": "Job Scrapers",
          "to": "Job Database",
          "dataType": "Raw job listings",
          "frequency": "daily batch",
          "volume": "hundreds per day"
        },
        {
          "from": "Job Database",
          "to": "Match Scoring Service",
          "dataType": "Job and CV data",
          "frequency": "batch processing",
          "volume": "thousands of comparisons"
        },
        {
          "from": "Match Scoring Service",
          "to": "Cache",
          "dataType": "Calculated match scores",
          "frequency": "real-time",
          "volume": "hundreds of scores"
        },
        {
          "from": "AI Services",
          "to": "Content Database",
          "dataType": "Generated cover letters and CVs",
          "frequency": "on-demand",
          "volume": "dozens per day"
        },
        {
          "from": "Application Tracker",
          "to": "Notification Service",
          "dataType": "Status change events",
          "frequency": "real-time",
          "volume": "dozens per day"
        }
      ]
    },
    "userInteractionPatterns": [
      {
        "pattern": "batch processing with progress indication",
        "description": "System processes large datasets in batches with user feedback on progress and ability to cancel operations",
        "relatedStories": [
          "US-023",
          "US-119",
          "US-120",
          "US-160"
        ],
        "architecturalImplications": [
          "requires background job processing system",
          "needs progress tracking and user notification mechanisms",
          "must handle cancellation and cleanup of partial operations",
          "requires batch size configuration and resource management"
        ]
      },
      {
        "pattern": "drag-and-drop workflow management",
        "description": "Users manage application status through visual drag-and-drop interface with real-time updates",
        "relatedStories": [
          "US-109",
          "US-112",
          "US-113"
        ],
        "architecturalImplications": [
          "requires real-time UI state synchronization",
          "needs optimistic updates with rollback capability",
          "must handle concurrent state changes",
          "requires visual feedback for drag operations"
        ]
      },
      {
        "pattern": "multi-variant content management",
        "description": "Users create and manage multiple versions of CVs and cover letters with independent processing",
        "relatedStories": [
          "US-174",
          "US-175",
          "US-176",
          "US-185",
          "US-186"
        ],
        "architecturalImplications": [
          "requires content versioning system",
          "needs independent processing pipelines per variant",
          "must support content comparison and rollback",
          "requires rich text editing capabilities"
        ]
      },
      {
        "pattern": "AI-assisted content creation with human oversight",
        "description": "System generates content using AI but requires human review and editing before finalization",
        "relatedStories": [
          "US-057",
          "US-063",
          "US-161",
          "US-163"
        ],
        "architecturalImplications": [
          "requires AI service integration with fallback options",
          "needs confidence scoring and validation mechanisms",
          "must support iterative refinement workflows",
          "requires rich text editing with version control"
        ]
      },
      {
        "pattern": "scheduled automation with manual override",
        "description": "System performs automated tasks on schedule but allows manual triggering and configuration",
        "relatedStories": [
          "US-001",
          "US-115",
          "US-119",
          "US-085"
        ],
        "architecturalImplications": [
          "requires job scheduling system",
          "needs manual trigger capabilities",
          "must handle scheduling conflicts and retries",
          "requires monitoring and alerting for failed jobs"
        ]
      }
    ],
    "crossCuttingConcerns": [
      {
        "concern": "comprehensive audit logging",
        "requirements": [
          "log all scraping operations with timestamps and results",
          "track user actions and system state changes",
          "maintain processing history for debugging"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-019",
          "REQ-020"
        ],
        "relatedACs": [
          "AC-004",
          "AC-032",
          "AC-033",
          "AC-547",
          "AC-565"
        ]
      },
      {
        "concern": "circuit breaker pattern implementation",
        "requirements": [
          "prevent cascade failures from external service issues",
          "implement exponential backoff with configurable limits",
          "provide graceful degradation when services unavailable"
        ],
        "relatedReqs": [
          "REQ-001",
          "REQ-021",
          "REQ-022"
        ],
        "relatedACs": [
          "AC-022",
          "AC-569",
          "AC-574",
          "AC-590"
        ]
      },
      {
        "concern": "batch processing with resource management",
        "requirements": [
          "process large datasets in configurable batch sizes",
          "implement rate limiting and resource monitoring",
          "provide progress tracking and cancellation"
        ],
        "relatedReqs": [
          "REQ-004",
          "REQ-020"
        ],
        "relatedACs": [
          "AC-108",
          "AC-553",
          "AC-556",
          "AC-557"
        ]
      },
      {
        "concern": "notification system",
        "requirements": [
          "centralized notification management",
          "configurable notification preferences",
          "persistent notifications until dismissed",
          "real-time notification delivery"
        ],
        "relatedReqs": [
          "REQ-015",
          "REQ-035"
        ],
        "relatedACs": [
          "AC-920",
          "AC-948",
          "AC-954",
          "AC-939"
        ]
      },
      {
        "concern": "version control and content management",
        "requirements": [
          "automatic versioning on content changes",
          "content comparison and rollback capabilities",
          "metadata tracking for all versions"
        ],
        "relatedReqs": [
          "REQ-033"
        ],
        "relatedACs": [
          "AC-865",
          "AC-875",
          "AC-880",
          "AC-890"
        ]
      },
      {
        "concern": "data privacy and local storage",
        "requirements": [
          "ensure all personal data stored locally only",
          "prevent unauthorized external data transmission",
          "provide optional external service usage"
        ],
        "relatedReqs": [
          "REQ-024",
          "REQ-025"
        ],
        "relatedACs": [
          "AC-622",
          "AC-635",
          "AC-631",
          "AC-638"
        ]
      },
      {
        "concern": "AI service integration and budget management",
        "requirements": [
          "track usage and costs across AI providers",
          "implement budget limits and alerts",
          "provide fallback to local services"
        ],
        "relatedReqs": [
          "REQ-013"
        ],
        "relatedACs": [
          "AC-345",
          "AC-353",
          "AC-357",
          "AC-365"
        ]
      }
    ],
    "extractionMetadata": {
      "totalReqsAnalyzed": 30,
      "totalStoriesAnalyzed": 206,
      "totalACsAnalyzed": 957,
      "extractionWarnings": []
    }
  },
  "systemOverview": {
    "executiveSummary": "The Core Job Assistant MVP is a locally-deployed job search automation platform that reduces remote job seekers' weekly search time from 15-20 hours to under 3 hours through intelligent job discovery, AI-powered matching, and automated application generation. The system operates entirely on the user's local machine using Docker containers, ensuring complete data privacy while leveraging hybrid AI capabilities for personalized job applications.",
    "systemPurpose": "Automate and optimize the remote job search process by intelligently discovering relevant opportunities across multiple platforms, generating personalized applications using AI, and tracking the application lifecycle to achieve 10%+ response rates while maintaining complete data privacy through local deployment.",
    "architecturalApproach": "Event-driven microservices architecture deployed as Docker containers with a TypeScript monorepo structure, featuring asynchronous job processing, hybrid AI integration (local Ollama + optional Claude API), and workflow orchestration through n8n for complex job search automation pipelines.",
    "keyCapabilities": [
      "Multi-platform job discovery and intelligent scraping",
      "AI-powered job-candidate matching with customizable preferences",
      "Automated CV and cover letter generation using hybrid AI",
      "Application lifecycle tracking with Kanban board interface",
      "Multiple CV/profile variant management",
      "Content editing and version control for applications",
      "Real-time notification system for job updates",
      "Workflow automation and orchestration"
    ],
    "contextDiagram": "┌─────────────┐     ┌──────────────────┐     ┌─────────────────┐\n│  Job Boards │────▶│  Core Job        │────▶│  AI Services    │\n│  (RemoteOK, │     │  Assistant MVP   │     │  (Ollama/Claude)│\n│  WeWork, etc)│     │                  │     └─────────────────┘\n└─────────────┘     │                  │     ┌─────────────────┐\n┌─────────────┐     │                  │────▶│  Email/Notify   │\n│   User      │◄────┤                  │     │  Services       │\n│  (Browser)  │     │                  │     └─────────────────┘\n└─────────────┘     └──────────────────┘     ┌─────────────────┐\n                                              │  Local Storage  │\n                                              │  (PostgreSQL)   │\n                                              └─────────────────┘",
    "externalDependencies": [
      {
        "system": "RemoteOK API",
        "purpose": "Job discovery from RemoteOK platform",
        "protocol": "REST",
        "owner": "RemoteOK"
      },
      {
        "system": "WeWorkRemotely",
        "purpose": "Job scraping from WeWorkRemotely platform",
        "protocol": "HTTP",
        "owner": "WeWorkRemotely"
      },
      {
        "system": "Himalayas Job Board",
        "purpose": "Job discovery from Himalayas platform",
        "protocol": "HTTP",
        "owner": "Himalayas"
      },
      {
        "system": "Indeed",
        "purpose": "Job scraping from Indeed platform",
        "protocol": "HTTP",
        "owner": "Indeed"
      },
      {
        "system": "Anthropic Claude API",
        "purpose": "Advanced AI content generation for applications",
        "protocol": "REST",
        "owner": "Anthropic"
      },
      {
        "system": "Ollama Local LLM",
        "purpose": "Local AI processing for privacy-sensitive operations",
        "protocol": "REST",
        "owner": "Ollama Community"
      },
      {
        "system": "n8n Workflow Engine",
        "purpose": "Automation and orchestration of job search workflows",
        "protocol": "REST",
        "owner": "n8n"
      },
      {
        "system": "Currency Conversion API",
        "purpose": "Salary normalization across different currencies",
        "protocol": "REST",
        "owner": "External Provider"
      },
      {
        "system": "Email Service",
        "purpose": "Notification delivery and communication",
        "protocol": "SMTP",
        "owner": "Email Provider"
      }
    ],
    "assumptionsAndConstraints": [
      "System must operate within 8GB RAM minimum requirement",
      "Zero infrastructure cost constraint requires local deployment only",
      "AI API budget limited to $5/month maximum",
      "All user data must remain local for privacy compliance",
      "Job board scraping must respect Terms of Service and rate limits",
      "Single-user deployment model with no authentication required",
      "TypeScript monorepo structure with pnpm workspaces is mandatory",
      "Daily scraping operations must complete within 60 minutes"
    ]
  },
  "architecturePrinciples": [
    {
      "name": "Privacy-First Local Processing",
      "description": "All sensitive user data (CVs, preferences, applications) must be processed and stored locally with no external transmission except for optional AI API calls",
      "rationale": "Remote job seekers require complete control over their personal and professional data, especially in competitive job markets where data leaks could harm career prospects",
      "implications": [
        "PostgreSQL database must be containerized and local-only",
        "AI processing should prefer local Ollama over external Claude API",
        "No cloud sync or backup features in MVP",
        "Service-to-service communication uses local networking only"
      ],
      "relatedReqs": [
        "CON-002",
        "REQ-020",
        "REQ-021",
        "REQ-022"
      ]
    },
    {
      "name": "Event-Driven Asynchronous Processing",
      "description": "Job discovery, AI processing, and application generation must operate asynchronously using event-driven patterns to handle long-running operations without blocking user interactions",
      "rationale": "Job scraping and AI content generation can take minutes to complete, requiring non-blocking architecture to maintain responsive user experience within resource constraints",
      "implications": [
        "Message queues for job processing pipelines",
        "Event sourcing for application state changes",
        "Background workers for scraping and AI operations",
        "Real-time UI updates through WebSocket connections"
      ],
      "relatedReqs": [
        "REQ-006-NFR",
        "REQ-019-NFR",
        "REQ-015",
        "REQ-016"
      ]
    },
    {
      "name": "Hybrid AI Architecture",
      "description": "Combine local Ollama LLM for privacy-sensitive operations with optional Claude API for advanced content generation, allowing users to balance privacy, cost, and quality",
      "rationale": "Users need flexibility to choose between complete privacy (Ollama) and higher quality output (Claude) based on their comfort level and budget constraints",
      "implications": [
        "Fallback mechanisms from Claude to Ollama",
        "Cost tracking and budget enforcement for external APIs",
        "Model-agnostic prompt engineering",
        "User preference settings for AI provider selection"
      ],
      "relatedReqs": [
        "CON-001",
        "REQ-007",
        "REQ-008",
        "REQ-025"
      ]
    },
    {
      "name": "Resource-Constrained Optimization",
      "description": "System must operate efficiently within 8GB RAM and complete daily operations within 60 minutes while maintaining zero infrastructure costs",
      "rationale": "Target users may have limited hardware resources and cannot afford cloud infrastructure, requiring careful resource management and optimization",
      "implications": [
        "Memory-efficient data structures and caching strategies",
        "Batch processing for resource-intensive operations",
        "Circuit breakers and retry logic for external API calls",
        "Container resource limits and monitoring"
      ],
      "relatedReqs": [
        "CON-001",
        "CON-004",
        "REQ-006-NFR",
        "REQ-019-NFR"
      ]
    },
    {
      "name": "Respectful Web Scraping",
      "description": "All job board interactions must respect Terms of Service, implement proper rate limiting, and use ethical scraping practices to ensure sustainable access to job data",
      "rationale": "Aggressive scraping could result in IP bans or legal issues, undermining the system's core value proposition of reliable job discovery",
      "implications": [
        "Configurable rate limiting per job board",
        "User-agent rotation and request headers management",
        "Graceful degradation when scraping is blocked",
        "Legal compliance monitoring and updates"
      ],
      "relatedReqs": [
        "REQ-023",
        "REQ-001",
        "REQ-002",
        "REQ-003"
      ]
    },
    {
      "name": "Single-Command Deployment",
      "description": "Entire system must start with a single 'docker-compose up' command, providing reproducible deployment across different environments without complex configuration",
      "rationale": "Target users are job seekers, not DevOps engineers, requiring zero-friction deployment to maximize adoption and minimize support overhead",
      "implications": [
        "All services containerized with proper dependency management",
        "Environment variables with sensible defaults",
        "Automated database migrations and seed data",
        "Health checks and startup orchestration"
      ],
      "relatedReqs": [
        "REQ-006-NFR",
        "CON-003",
        "CON-004"
      ]
    },
    {
      "name": "Workflow-Driven Automation",
      "description": "Complex job search processes should be orchestrated through n8n workflows, enabling users to customize and extend automation without code changes",
      "rationale": "Job search strategies vary significantly between users and industries, requiring flexible automation that can adapt to different approaches and preferences",
      "implications": [
        "Core services expose APIs for workflow integration",
        "Pre-built workflow templates for common scenarios",
        "Visual workflow editor integration",
        "Event triggers for workflow execution"
      ],
      "relatedReqs": [
        "REQ-030",
        "REQ-031",
        "REQ-032",
        "REQ-033"
      ]
    },
    {
      "name": "Quality-Focused Matching",
      "description": "Job-candidate matching must prioritize relevance and personalization over quantity, aiming for 10%+ application response rates through intelligent filtering and customization",
      "rationale": "Current job search tools overwhelm users with irrelevant opportunities, leading to low response rates and wasted effort on poor-fit applications",
      "implications": [
        "Multi-dimensional matching algorithms considering skills, preferences, and career goals",
        "Machine learning models for response rate prediction",
        "User feedback loops to improve matching accuracy",
        "Customizable scoring and filtering criteria"
      ],
      "relatedReqs": [
        "OBJ-003",
        "REQ-009",
        "REQ-010",
        "REQ-011"
      ]
    }
  ],
  "components": [
    {
      "name": "Job Discovery Service",
      "purpose": "Orchestrates multi-platform job scraping, data extraction, and normalization",
      "location": "services/job-discovery",
      "dependencies": [
        "Job Platform Scrapers",
        "Job Storage Service",
        "Event Bus",
        "n8n Workflow Engine"
      ],
      "keyPatterns": [
        "Event-Driven Architecture",
        "Circuit Breaker",
        "Batch Processing"
      ],
      "interfaces": [
        {
          "name": "Job Discovery API",
          "type": "api",
          "description": "REST endpoints for triggering scraping jobs and retrieving status"
        },
        {
          "name": "Job Events Publisher",
          "type": "event",
          "description": "Publishes job.discovered, job.processed, scraping.completed events"
        }
      ],
      "responsibilities": [
        "Coordinate scraping across platforms",
        "Deduplicate job listings",
        "Normalize job data",
        "Manage scraping schedules"
      ],
      "relatedReqs": [
        "REQ-001",
        "REQ-002",
        "REQ-003",
        "REQ-004",
        "REQ-005"
      ]
    },
    {
      "name": "Job Platform Scrapers",
      "purpose": "Individual scraper modules for each job platform with respectful rate limiting",
      "location": "services/job-discovery/scrapers",
      "dependencies": [
        "HTTP Client",
        "Rate Limiter",
        "Circuit Breaker"
      ],
      "keyPatterns": [
        "Strategy Pattern",
        "Circuit Breaker",
        "Rate Limiting"
      ],
      "interfaces": [
        {
          "name": "Scraper Interface",
          "type": "internal",
          "description": "Common interface for all platform scrapers"
        },
        {
          "name": "Platform APIs",
          "type": "api",
          "description": "HTTP/REST connections to external job platforms"
        }
      ],
      "responsibilities": [
        "Extract job data from specific platforms",
        "Respect ToS and rate limits",
        "Handle platform-specific data formats"
      ],
      "relatedReqs": [
        "REQ-001",
        "REQ-002"
      ]
    },
    {
      "name": "Intelligent Matching Service",
      "purpose": "AI-powered job-candidate matching with skill gap analysis",
      "location": "services/matching",
      "dependencies": [
        "Hybrid AI Service",
        "User Profile Service",
        "Job Storage Service",
        "Event Bus"
      ],
      "keyPatterns": [
        "Hybrid AI Architecture",
        "Event-Driven Processing"
      ],
      "interfaces": [
        {
          "name": "Matching API",
          "type": "api",
          "description": "REST endpoints for triggering matches and retrieving scores"
        },
        {
          "name": "Match Events",
          "type": "event",
          "description": "Publishes match.calculated, gap.analyzed events"
        }
      ],
      "responsibilities": [
        "Calculate job-candidate match scores",
        "Perform skill gap analysis",
        "Generate match reports",
        "Prioritize job recommendations"
      ],
      "relatedReqs": [
        "REQ-008",
        "REQ-009",
        "REQ-010"
      ]
    },
    {
      "name": "Hybrid AI Service",
      "purpose": "Orchestrates local Ollama and optional Claude API for content generation",
      "location": "services/ai",
      "dependencies": [
        "Ollama Local LLM",
        "Claude API Client",
        "Budget Manager",
        "Privacy Filter"
      ],
      "keyPatterns": [
        "Hybrid AI Architecture",
        "Circuit Breaker",
        "Budget Management"
      ],
      "interfaces": [
        {
          "name": "AI Processing API",
          "type": "api",
          "description": "Unified interface for AI content generation and analysis"
        },
        {
          "name": "AI Events",
          "type": "event",
          "description": "Publishes ai.content.generated, ai.analysis.completed events"
        }
      ],
      "responsibilities": [
        "Route requests to appropriate AI provider",
        "Manage AI budget and usage",
        "Ensure privacy compliance",
        "Generate CVs and cover letters"
      ],
      "relatedReqs": [
        "REQ-010",
        "REQ-011",
        "REQ-012",
        "REQ-013",
        "REQ-014"
      ]
    },
    {
      "name": "User Profile Service",
      "purpose": "Manages user profiles, CV variants, and job preferences with local storage",
      "location": "services/user-profile",
      "dependencies": [
        "Local Database",
        "File Storage",
        "Event Bus"
      ],
      "keyPatterns": [
        "Privacy-First Local Processing",
        "Version Control"
      ],
      "interfaces": [
        {
          "name": "Profile Management API",
          "type": "api",
          "description": "CRUD operations for user profiles and CV variants"
        },
        {
          "name": "Profile Events",
          "type": "event",
          "description": "Publishes profile.updated, cv.uploaded events"
        }
      ],
      "responsibilities": [
        "Store user data locally",
        "Manage CV variants",
        "Parse uploaded CVs",
        "Maintain job preferences"
      ],
      "relatedReqs": [
        "REQ-006",
        "REQ-007",
        "REQ-015",
        "REQ-016",
        "REQ-017"
      ]
    },
    {
      "name": "Application Management Service",
      "purpose": "Tracks job applications with Kanban interface and lifecycle management",
      "location": "services/application-management",
      "dependencies": [
        "Local Database",
        "Notification Service",
        "Event Bus"
      ],
      "keyPatterns": [
        "Event-Driven Architecture",
        "State Machine"
      ],
      "interfaces": [
        {
          "name": "Application Tracking API",
          "type": "api",
          "description": "REST endpoints for application CRUD and status updates"
        },
        {
          "name": "Application Events",
          "type": "event",
          "description": "Publishes application.created, application.status.changed events"
        }
      ],
      "responsibilities": [
        "Track application status",
        "Manage application lifecycle",
        "Provide Kanban board data",
        "Schedule follow-ups"
      ],
      "relatedReqs": [
        "REQ-018",
        "REQ-019",
        "REQ-020",
        "REQ-021"
      ]
    },
    {
      "name": "Content Generation Service",
      "purpose": "Generates and manages tailored CVs and cover letters with version control",
      "location": "services/content-generation",
      "dependencies": [
        "Hybrid AI Service",
        "User Profile Service",
        "Version Control System",
        "Event Bus"
      ],
      "keyPatterns": [
        "AI-Assisted Content Creation",
        "Version Control",
        "Template Management"
      ],
      "interfaces": [
        {
          "name": "Content Generation API",
          "type": "api",
          "description": "REST endpoints for generating and managing content"
        },
        {
          "name": "Content Events",
          "type": "event",
          "description": "Publishes content.generated, content.approved events"
        }
      ],
      "responsibilities": [
        "Generate tailored content",
        "Manage content versions",
        "Apply templates",
        "Track content approval workflow"
      ],
      "relatedReqs": [
        "REQ-011",
        "REQ-012",
        "REQ-013",
        "REQ-014",
        "REQ-022",
        "REQ-023"
      ]
    },
    {
      "name": "Notification Service",
      "purpose": "Centralized notification management with multiple delivery channels",
      "location": "services/notifications",
      "dependencies": [
        "Email Service",
        "Event Bus",
        "User Preferences"
      ],
      "keyPatterns": [
        "Observer Pattern",
        "Template Management"
      ],
      "interfaces": [
        {
          "name": "Notification API",
          "type": "api",
          "description": "REST endpoints for sending and managing notifications"
        },
        {
          "name": "Notification Events",
          "type": "event",
          "description": "Consumes various system events to trigger notifications"
        }
      ],
      "responsibilities": [
        "Send email notifications",
        "Manage notification preferences",
        "Schedule reminders",
        "Track delivery status"
      ],
      "relatedReqs": [
        "REQ-024",
        "REQ-025",
        "REQ-026"
      ]
    },
    {
      "name": "Workflow Orchestration Service",
      "purpose": "Integrates with n8n for complex job search automation workflows",
      "location": "services/workflow",
      "dependencies": [
        "n8n Workflow Engine",
        "Event Bus",
        "All Domain Services"
      ],
      "keyPatterns": [
        "Workflow-Driven Automation",
        "Event-Driven Architecture"
      ],
      "interfaces": [
        {
          "name": "Workflow API",
          "type": "api",
          "description": "REST endpoints for workflow management and triggers"
        },
        {
          "name": "Workflow Events",
          "type": "event",
          "description": "Publishes and consumes workflow-related events"
        }
      ],
      "responsibilities": [
        "Orchestrate complex workflows",
        "Integrate with n8n",
        "Manage workflow state",
        "Handle workflow scheduling"
      ],
      "relatedReqs": [
        "REQ-027",
        "REQ-028",
        "REQ-029",
        "REQ-030"
      ]
    },
    {
      "name": "API Gateway",
      "purpose": "Single entry point for all client requests with authentication and rate limiting",
      "location": "services/api-gateway",
      "dependencies": [
        "All Domain Services",
        "Authentication Service",
        "Rate Limiter"
      ],
      "keyPatterns": [
        "API Gateway Pattern",
        "Circuit Breaker",
        "Rate Limiting"
      ],
      "interfaces": [
        {
          "name": "Public API",
          "type": "api",
          "description": "Unified REST API for all client interactions"
        },
        {
          "name": "Service Mesh",
          "type": "internal",
          "description": "Internal service-to-service communication"
        }
      ],
      "responsibilities": [
        "Route requests to services",
        "Handle authentication",
        "Apply rate limiting",
        "Aggregate responses"
      ],
      "relatedReqs": [
        "REQ-031",
        "REQ-032",
        "REQ-033"
      ]
    },
    {
      "name": "Web Frontend",
      "purpose": "React-based user interface with real-time updates and responsive design",
      "location": "apps/web-frontend",
      "dependencies": [
        "API Gateway",
        "WebSocket Service",
        "Local Storage"
      ],
      "keyPatterns": [
        "Component-Based Architecture",
        "Real-Time Updates"
      ],
      "interfaces": [
        {
          "name": "REST API Client",
          "type": "api",
          "description": "Consumes API Gateway endpoints"
        },
        {
          "name": "WebSocket Client",
          "type": "sync",
          "description": "Real-time updates for job status and notifications"
        }
      ],
      "responsibilities": [
        "Provide user interface",
        "Handle user interactions",
        "Display real-time updates",
        "Manage client-side state"
      ],
      "relatedReqs": [
        "REQ-034",
        "REQ-035"
      ]
    }
  ],
  "dataArchitecture": {
    "dataStores": [
      {
        "name": "Primary Database",
        "technology": "PostgreSQL",
        "purpose": "Primary data store for all structured data including jobs, user profiles, applications, and generated content",
        "dataTypes": [
          "user profiles",
          "job listings",
          "applications",
          "CV variants",
          "generated content",
          "match scores",
          "notifications"
        ],
        "accessPatterns": [
          "read-heavy",
          "complex queries",
          "ACID transactions",
          "full-text search"
        ],
        "scalingStrategy": "Vertical scaling with connection pooling and read replicas for read-heavy workloads"
      },
      {
        "name": "Cache Layer",
        "technology": "Redis",
        "purpose": "Caching frequently accessed match scores, job search results, and session data",
        "dataTypes": [
          "match scores",
          "search results",
          "user sessions",
          "rate limiting counters"
        ],
        "accessPatterns": [
          "read-heavy",
          "fast lookups",
          "TTL-based expiration"
        ],
        "scalingStrategy": "Single instance with persistence, clustering for high availability if needed"
      },
      {
        "name": "File Storage",
        "technology": "Local Filesystem",
        "purpose": "Storage for uploaded CV files and generated documents",
        "dataTypes": [
          "PDF files",
          "DOCX files",
          "generated CVs",
          "cover letters"
        ],
        "accessPatterns": [
          "write-once-read-many",
          "version-controlled",
          "blob storage"
        ],
        "scalingStrategy": "Local directory structure with file versioning and cleanup policies"
      }
    ],
    "coreEntities": [
      {
        "name": "Job",
        "description": "Normalized job listing with extracted and enriched data",
        "fields": [
          {
            "name": "id",
            "type": "UUID",
            "description": "Unique job identifier",
            "required": true
          },
          {
            "name": "title",
            "type": "VARCHAR(255)",
            "description": "Job title",
            "required": true
          },
          {
            "name": "company",
            "type": "VARCHAR(255)",
            "description": "Company name",
            "required": true
          },
          {
            "name": "description",
            "type": "JSONB",
            "description": "Structured job description with extracted skills and requirements",
            "required": true
          },
          {
            "name": "location",
            "type": "VARCHAR(255)",
            "description": "Job location or 'Remote'",
            "required": false
          },
          {
            "name": "salary_range",
            "type": "JSONB",
            "description": "Salary information with min/max/currency",
            "required": false
          },
          {
            "name": "source_platform",
            "type": "VARCHAR(100)",
            "description": "Job board where job was scraped",
            "required": true
          },
          {
            "name": "external_id",
            "type": "VARCHAR(255)",
            "description": "Original job ID from source platform",
            "required": true
          },
          {
            "name": "scraped_at",
            "type": "TIMESTAMP",
            "description": "When job was scraped",
            "required": true
          },
          {
            "name": "expires_at",
            "type": "TIMESTAMP",
            "description": "Job expiration date",
            "required": false
          }
        ],
        "relationships": [
          "One-to-many with Applications",
          "One-to-many with MatchScores"
        ],
        "indexes": [
          "btree on title",
          "gin on description",
          "btree on company",
          "btree on scraped_at",
          "unique on (source_platform, external_id)"
        ]
      },
      {
        "name": "UserProfile",
        "description": "User preferences, skills, and job search configuration",
        "fields": [
          {
            "name": "id",
            "type": "UUID",
            "description": "User profile identifier",
            "required": true
          },
          {
            "name": "name",
            "type": "VARCHAR(255)",
            "description": "User's full name",
            "required": true
          },
          {
            "name": "email",
            "type": "VARCHAR(255)",
            "description": "Contact email",
            "required": true
          },
          {
            "name": "skills",
            "type": "JSONB",
            "description": "Array of skills with proficiency levels",
            "required": true
          },
          {
            "name": "job_preferences",
            "type": "JSONB",
            "description": "Job search criteria including location, salary, role types",
            "required": true
          },
          {
            "name": "experience_level",
            "type": "VARCHAR(50)",
            "description": "Junior, Mid, Senior, Lead",
            "required": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP",
            "description": "Profile creation timestamp",
            "required": true
          },
          {
            "name": "updated_at",
            "type": "TIMESTAMP",
            "description": "Last update timestamp",
            "required": true
          }
        ],
        "relationships": [
          "One-to-many with CVVariants",
          "One-to-many with Applications",
          "One-to-many with MatchScores"
        ],
        "indexes": [
          "btree on email",
          "gin on skills",
          "gin on job_preferences"
        ]
      },
      {
        "name": "Application",
        "description": "Job application tracking with status and metadata",
        "fields": [
          {
            "name": "id",
            "type": "UUID",
            "description": "Application identifier",
            "required": true
          },
          {
            "name": "job_id",
            "type": "UUID",
            "description": "Reference to Job",
            "required": true
          },
          {
            "name": "user_id",
            "type": "UUID",
            "description": "Reference to UserProfile",
            "required": true
          },
          {
            "name": "status",
            "type": "VARCHAR(50)",
            "description": "Applied, Interview, Rejected, Offer, etc.",
            "required": true
          },
          {
            "name": "cv_variant_id",
            "type": "UUID",
            "description": "CV version used for application",
            "required": false
          },
          {
            "name": "cover_letter_id",
            "type": "UUID",
            "description": "Cover letter used for application",
            "required": false
          },
          {
            "name": "applied_at",
            "type": "TIMESTAMP",
            "description": "Application submission date",
            "required": true
          },
          {
            "name": "notes",
            "type": "TEXT",
            "description": "User notes about application",
            "required": false
          }
        ],
        "relationships": [
          "Many-to-one with Job",
          "Many-to-one with UserProfile",
          "Many-to-one with CVVariant"
        ],
        "indexes": [
          "btree on job_id",
          "btree on user_id",
          "btree on status",
          "btree on applied_at"
        ]
      },
      {
        "name": "CVVariant",
        "description": "Multiple CV versions with parsed skills and content",
        "fields": [
          {
            "name": "id",
            "type": "UUID",
            "description": "CV variant identifier",
            "required": true
          },
          {
            "name": "user_id",
            "type": "UUID",
            "description": "Reference to UserProfile",
            "required": true
          },
          {
            "name": "name",
            "type": "VARCHAR(255)",
            "description": "CV variant name/label",
            "required": true
          },
          {
            "name": "file_path",
            "type": "VARCHAR(500)",
            "description": "Path to CV file on filesystem",
            "required": true
          },
          {
            "name": "parsed_content",
            "type": "JSONB",
            "description": "Extracted text and structured data from CV",
            "required": true
          },
          {
            "name": "extracted_skills",
            "type": "JSONB",
            "description": "Skills extracted from CV content",
            "required": true
          },
          {
            "name": "is_primary",
            "type": "BOOLEAN",
            "description": "Whether this is the primary CV",
            "required": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP",
            "description": "CV upload timestamp",
            "required": true
          }
        ],
        "relationships": [
          "Many-to-one with UserProfile",
          "One-to-many with Applications"
        ],
        "indexes": [
          "btree on user_id",
          "gin on extracted_skills",
          "btree on is_primary"
        ]
      },
      {
        "name": "MatchScore",
        "description": "Job-candidate match scores with detailed breakdown",
        "fields": [
          {
            "name": "id",
            "type": "UUID",
            "description": "Match score identifier",
            "required": true
          },
          {
            "name": "job_id",
            "type": "UUID",
            "description": "Reference to Job",
            "required": true
          },
          {
            "name": "user_id",
            "type": "UUID",
            "description": "Reference to UserProfile",
            "required": true
          },
          {
            "name": "overall_score",
            "type": "DECIMAL(3,2)",
            "description": "Overall match score 0.00-1.00",
            "required": true
          },
          {
            "name": "skill_match",
            "type": "JSONB",
            "description": "Detailed skill matching breakdown",
            "required": true
          },
          {
            "name": "experience_match",
            "type": "DECIMAL(3,2)",
            "description": "Experience level match score",
            "required": true
          },
          {
            "name": "location_match",
            "type": "DECIMAL(3,2)",
            "description": "Location preference match score",
            "required": true
          },
          {
            "name": "calculated_at",
            "type": "TIMESTAMP",
            "description": "When score was calculated",
            "required": true
          }
        ],
        "relationships": [
          "Many-to-one with Job",
          "Many-to-one with UserProfile"
        ],
        "indexes": [
          "btree on job_id",
          "btree on user_id",
          "btree on overall_score DESC",
          "btree on calculated_at"
        ]
      }
    ],
    "dataFlowDescription": "Data flows through the system in several key patterns: (1) Job Discovery: Scrapers collect raw job data, which flows to the Job Discovery Service for normalization and storage in PostgreSQL; (2) Matching Pipeline: Job and user profile data flows to the Intelligent Matching Service, which calculates match scores and caches results in Redis; (3) Application Tracking: User actions create application records that flow through the Application Management Service with status updates triggering notifications; (4) Content Generation: User profiles and job data flow to the Hybrid AI Service and Content Generation Service to create tailored CVs and cover letters stored as files and metadata in PostgreSQL; (5) Real-time Updates: All state changes generate events through Redis Streams to update the frontend via WebSocket connections.",
    "cachingStrategy": "Multi-layer caching with Redis for frequently accessed match scores (TTL: 24h), job search results (TTL: 1h), and user session data (TTL: 30 days). PostgreSQL query result caching for complex job searches. File system caching for generated documents with version-based invalidation.",
    "dataRetention": "Jobs: 90 days after expiration; Applications: Indefinite (user-controlled deletion); Match Scores: 30 days (recalculated as needed); Generated Content: Indefinite with user-controlled cleanup; Notifications: 30 days; Scraping Jobs: 7 days for logs, indefinite for metadata"
  },
  "integrationArchitecture": {
    "apiDesign": {
      "pattern": "REST",
      "conventions": [
        "RESTful resource-based URLs (/api/v1/jobs, /api/v1/applications)",
        "Standard HTTP methods (GET, POST, PUT, DELETE, PATCH)",
        "JSON request/response format with consistent envelope",
        "Semantic versioning in URL path (/api/v1/)"
      ],
      "requestResponseFormat": "{ \"data\": {}, \"meta\": { \"timestamp\": \"ISO8601\", \"requestId\": \"uuid\" }, \"errors\": [] }"
    },
    "integrationContracts": [
      {
        "systemName": "RemoteOK API",
        "purpose": "Fetch remote job listings",
        "protocol": "REST",
        "authentication": "API key in headers",
        "operations": [
          {
            "name": "Get Jobs",
            "method": "GET",
            "endpoint": "/api",
            "requestSchema": "Query parameters for filtering",
            "responseSchema": "Array of job objects with company, position, tags"
          }
        ],
        "errorHandling": "Retry on 5xx, circuit break on repeated failures",
        "circuitBreaker": {
          "enabled": true,
          "failureThreshold": 5,
          "resetTimeout": 60
        },
        "retryPolicy": {
          "maxAttempts": 3,
          "backoffType": "exponential",
          "backoffBase": 2000
        }
      },
      {
        "systemName": "Anthropic Claude API",
        "purpose": "High-quality AI content generation",
        "protocol": "REST",
        "authentication": "Bearer token",
        "operations": [
          {
            "name": "Generate Content",
            "method": "POST",
            "endpoint": "/v1/messages",
            "requestSchema": "Messages array with system and user prompts",
            "responseSchema": "Generated content with token usage"
          }
        ],
        "errorHandling": "Budget tracking, fallback to Ollama on limits",
        "circuitBreaker": {
          "enabled": true,
          "failureThreshold": 3,
          "resetTimeout": 300
        },
        "retryPolicy": {
          "maxAttempts": 2,
          "backoffType": "fixed",
          "backoffBase": 5000
        }
      },
      {
        "systemName": "Ollama Local LLM",
        "purpose": "Privacy-first local AI processing",
        "protocol": "REST",
        "authentication": "None (local service)",
        "operations": [
          {
            "name": "Generate",
            "method": "POST",
            "endpoint": "/api/generate",
            "requestSchema": "Model name, prompt, and options",
            "responseSchema": "Generated text with metadata"
          },
          {
            "name": "Chat",
            "method": "POST",
            "endpoint": "/api/chat",
            "requestSchema": "Messages array for conversational AI",
            "responseSchema": "Chat response with context"
          }
        ],
        "errorHandling": "Local service monitoring, restart on failure",
        "circuitBreaker": {
          "enabled": true,
          "failureThreshold": 3,
          "resetTimeout": 30
        },
        "retryPolicy": {
          "maxAttempts": 2,
          "backoffType": "linear",
          "backoffBase": 1000
        }
      },
      {
        "systemName": "n8n Workflow Engine",
        "purpose": "Complex workflow orchestration and automation",
        "protocol": "REST",
        "authentication": "API key or basic auth",
        "operations": [
          {
            "name": "Trigger Workflow",
            "method": "POST",
            "endpoint": "/webhook/{workflow-id}",
            "requestSchema": "Workflow input data and parameters",
            "responseSchema": "Execution ID and initial status"
          },
          {
            "name": "Get Execution Status",
            "method": "GET",
            "endpoint": "/api/v1/executions/{execution-id}",
            "requestSchema": "Execution ID in path",
            "responseSchema": "Execution status and results"
          }
        ],
        "errorHandling": "Workflow retry logic, manual intervention on critical failures",
        "circuitBreaker": {
          "enabled": true,
          "failureThreshold": 5,
          "resetTimeout": 60
        },
        "retryPolicy": {
          "maxAttempts": 3,
          "backoffType": "exponential",
          "backoffBase": 2000
        }
      },
      {
        "systemName": "Email Service (SMTP)",
        "purpose": "Send notification emails and reminders",
        "protocol": "SMTP",
        "authentication": "Username/password or OAuth2",
        "operations": [
          {
            "name": "Send Email",
            "method": "SMTP",
            "endpoint": "smtp.provider.com:587",
            "requestSchema": "Email headers, body, and attachments",
            "responseSchema": "Delivery confirmation or error"
          }
        ],
        "errorHandling": "Queue failed emails for retry, fallback providers",
        "circuitBreaker": {
          "enabled": true,
          "failureThreshold": 5,
          "resetTimeout": 300
        },
        "retryPolicy": {
          "maxAttempts": 3,
          "backoffType": "exponential",
          "backoffBase": 5000
        }
      }
    ],
    "messagingPatterns": [
      "Event-driven communication between services",
      "Publish-subscribe for job updates and notifications",
      "Command-query separation for read/write operations",
      "Saga pattern for distributed transactions"
    ],
    "eventDrivenArchitecture": {
      "enabled": true,
      "eventBus": "Redis Streams with Docker deployment",
      "eventTypes": [
        "job.discovered",
        "job.processed",
        "scraping.completed",
        "match.calculated",
        "gap.analyzed",
        "ai.content.generated",
        "profile.updated",
        "cv.uploaded",
        "application.created",
        "application.status.changed",
        "content.generated",
        "content.approved",
        "workflow.triggered",
        "workflow.completed",
        "notification.sent"
      ]
    }
  },
  "securityArchitecture": {
    "securityBoundaries": "Three-tier security model: (1) External Boundary - API Gateway with rate limiting and input validation protecting against external threats; (2) Service Boundary - Internal service-to-service communication using environment-based shared secrets within Docker network; (3) Data Boundary - PostgreSQL and Redis accessible only from application services, file system access restricted to application user",
    "authenticationPattern": {
      "type": "Environment-based Shared Secrets",
      "flow": "Single-user localhost deployment with no user authentication required. Internal services authenticate using shared secrets from environment variables. External API calls (Claude API) use API keys from environment configuration.",
      "tokenStructure": "No user tokens. Service-to-service uses HMAC-signed requests with shared secrets. External API keys stored as environment variables."
    },
    "authorizationModel": {
      "type": "Trust-based (Single User)",
      "roleMapping": [
        {
          "role": "LocalUser",
          "permissions": [
            "read_all_data",
            "write_all_data",
            "manage_applications",
            "generate_content",
            "configure_preferences"
          ]
        },
        {
          "role": "InternalService",
          "permissions": [
            "read_service_data",
            "write_service_data",
            "publish_events",
            "call_internal_apis"
          ]
        }
      ]
    },
    "securityControls": [
      {
        "control": "Input Validation",
        "implementation": "Joi schema validation at API Gateway and service boundaries for all incoming data",
        "location": "API Gateway middleware and service controllers",
        "relatedReqs": [
          "REQ-019"
        ]
      },
      {
        "control": "Rate Limiting",
        "implementation": "Redis-based rate limiting for external scraping (respectful crawling) and API endpoints",
        "location": "Job Platform Scrapers and API Gateway",
        "relatedReqs": [
          "REQ-019",
          "REQ-033"
        ]
      },
      {
        "control": "API Key Management",
        "implementation": "Environment variables for all API keys with .env.example template and documentation",
        "location": "Application configuration and Hybrid AI Service",
        "relatedReqs": [
          "REQ-020",
          "REQ-021"
        ]
      },
      {
        "control": "Data Encryption at Rest",
        "implementation": "PostgreSQL transparent data encryption for sensitive fields, file system permissions for CV storage",
        "location": "Database layer and file storage",
        "relatedReqs": [
          "REQ-018"
        ]
      },
      {
        "control": "Secure Communication",
        "implementation": "HTTPS for external API calls, encrypted Docker network for internal service communication",
        "location": "Network layer and service communication",
        "relatedReqs": [
          "REQ-020"
        ]
      },
      {
        "control": "Audit Logging",
        "implementation": "Structured logging of all data access, job applications, and external API calls",
        "location": "All services with centralized log aggregation",
        "relatedReqs": [
          "REQ-033"
        ]
      },
      {
        "control": "Secret Management",
        "implementation": "Environment-based secret management with no secrets in code or version control",
        "location": "Application startup and configuration management",
        "relatedReqs": [
          "REQ-020",
          "REQ-021"
        ]
      }
    ],
    "sensitiveDataHandling": [
      {
        "dataType": "Personal Information",
        "classification": "PII",
        "handling": "Stored locally in PostgreSQL with field-level encryption, never transmitted except for optional AI API calls with user consent"
      },
      {
        "dataType": "CV Content",
        "classification": "Confidential",
        "handling": "Stored locally on filesystem with restricted permissions, parsed content in encrypted database fields"
      },
      {
        "dataType": "Job Application Data",
        "classification": "Internal",
        "handling": "Local storage only, encrypted sensitive fields, audit trail for all modifications"
      },
      {
        "dataType": "API Keys",
        "classification": "Confidential",
        "handling": "Environment variables only, never logged or stored in database, rotation supported through configuration"
      },
      {
        "dataType": "Match Scores",
        "classification": "Internal",
        "handling": "Cached with TTL, no external transmission, user-controlled deletion"
      }
    ],
    "complianceRequirements": [
      "Privacy-first architecture",
      "Job board Terms of Service compliance",
      "Robots.txt compliance"
    ]
  },
  "deploymentArchitecture": {
    "targetEnvironment": {
      "platform": "Docker Compose",
      "topology": "Single-host containerized deployment with service mesh networking, shared volumes for data persistence, and Redis for inter-service communication",
      "topologyDiagram": "┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐\n│   Web Frontend  │  │   API Gateway   │  │  Job Discovery  │\n│    (Next.js)    │◄─┤   (Express)     │◄─┤    Service      │\n└─────────────────┘  └─────────────────┘  └─────────────────┘\n         │                     │                     │\n         ▼                     ▼                     ▼\n┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐\n│   PostgreSQL    │  │      Redis      │  │  Hybrid AI      │\n│   (Database)    │  │ (Cache/Events)  │  │   Service       │\n└─────────────────┘  └─────────────────┘  └─────────────────┘",
      "environmentVariables": [
        {
          "name": "NODE_ENV",
          "description": "Application environment (development/production)",
          "sensitive": false
        },
        {
          "name": "DATABASE_URL",
          "description": "PostgreSQL connection string",
          "sensitive": true
        },
        {
          "name": "REDIS_URL",
          "description": "Redis connection string for cache and events",
          "sensitive": false
        },
        {
          "name": "CLAUDE_API_KEY",
          "description": "Anthropic Claude API key for premium AI features",
          "sensitive": true
        },
        {
          "name": "OLLAMA_HOST",
          "description": "Local Ollama instance endpoint",
          "sensitive": false
        },
        {
          "name": "AI_BUDGET_LIMIT",
          "description": "Monthly budget limit for AI API calls in USD",
          "sensitive": false
        },
        {
          "name": "SCRAPING_RATE_LIMIT",
          "description": "Requests per minute for job board scraping",
          "sensitive": false
        }
      ]
    },
    "scalingStrategy": [
      {
        "component": "Job Discovery Service",
        "minInstances": 1,
        "maxInstances": 3,
        "scalingTrigger": "Queue depth > 100 jobs"
      },
      {
        "component": "Job Platform Scrapers",
        "minInstances": 2,
        "maxInstances": 5,
        "scalingTrigger": "CPU > 70% during scraping hours"
      },
      {
        "component": "Hybrid AI Service",
        "minInstances": 1,
        "maxInstances": 2,
        "scalingTrigger": "Request queue > 10 or response time > 5s"
      },
      {
        "component": "Content Generation Service",
        "minInstances": 1,
        "maxInstances": 2,
        "scalingTrigger": "Active generation requests > 5"
      },
      {
        "component": "API Gateway",
        "minInstances": 1,
        "maxInstances": 2,
        "scalingTrigger": "Requests/sec > 100"
      }
    ],
    "resourceRequirements": [
      {
        "component": "Job Discovery Service",
        "cpuRequest": "250m",
        "cpuLimit": "1000m",
        "memoryRequest": "512Mi",
        "memoryLimit": "1Gi"
      },
      {
        "component": "Hybrid AI Service",
        "cpuRequest": "500m",
        "cpuLimit": "2000m",
        "memoryRequest": "1Gi",
        "memoryLimit": "2Gi"
      },
      {
        "component": "PostgreSQL",
        "cpuRequest": "250m",
        "cpuLimit": "1000m",
        "memoryRequest": "512Mi",
        "memoryLimit": "1Gi"
      },
      {
        "component": "Redis",
        "cpuRequest": "100m",
        "cpuLimit": "500m",
        "memoryRequest": "256Mi",
        "memoryLimit": "512Mi"
      },
      {
        "component": "Web Frontend",
        "cpuRequest": "100m",
        "cpuLimit": "500m",
        "memoryRequest": "256Mi",
        "memoryLimit": "512Mi"
      }
    ],
    "containerization": {
      "enabled": true,
      "baseImage": "node:20-alpine",
      "buildStrategy": "multi-stage with TypeScript compilation and production dependencies only"
    },
    "cicdPipeline": "Local development with Docker Compose, automated testing on commit, container builds with GitHub Actions, deployment via docker-compose pull and restart for updates"
  },
  "operationalConcerns": {
    "configurationManagement": {
      "environmentVariables": [
        "NODE_ENV",
        "DATABASE_URL",
        "REDIS_URL",
        "CLAUDE_API_KEY",
        "OLLAMA_HOST",
        "AI_BUDGET_LIMIT"
      ],
      "databaseConfiguration": "PostgreSQL configuration via environment variables with connection pooling and migration scripts in TypeScript",
      "featureFlags": [
        "ENABLE_CLAUDE_API",
        "ENABLE_ADVANCED_MATCHING",
        "ENABLE_WORKFLOW_ORCHESTRATION"
      ]
    },
    "healthChecks": [
      {
        "endpoint": "/health/ready",
        "purpose": "readiness check",
        "checks": [
          "database",
          "redis",
          "ollama-connection"
        ]
      },
      {
        "endpoint": "/health/live",
        "purpose": "liveness check",
        "checks": [
          "process-status",
          "memory-usage"
        ]
      },
      {
        "endpoint": "/health/startup",
        "purpose": "startup check",
        "checks": [
          "database-migration",
          "initial-data-load",
          "ai-service-initialization"
        ]
      }
    ],
    "logging": {
      "destination": "stdout with structured JSON format",
      "retention": "30 days via Docker log rotation",
      "keyEvents": [
        {
          "event": "job_scraping_started",
          "level": "info",
          "trigger": "when scraping job begins for a platform",
          "fields": [
            "platform",
            "timestamp",
            "expected_duration"
          ]
        },
        {
          "event": "ai_request_processed",
          "level": "info",
          "trigger": "when AI service completes request",
          "fields": [
            "provider",
            "cost",
            "tokens_used",
            "response_time"
          ]
        },
        {
          "event": "application_generated",
          "level": "info",
          "trigger": "when cover letter or application is generated",
          "fields": [
            "job_id",
            "generation_type",
            "ai_provider"
          ]
        },
        {
          "event": "budget_threshold_reached",
          "level": "warn",
          "trigger": "when AI budget reaches 80% of limit",
          "fields": [
            "current_usage",
            "budget_limit",
            "remaining_budget"
          ]
        },
        {
          "event": "scraping_failed",
          "level": "error",
          "trigger": "when job scraping fails for a platform",
          "fields": [
            "platform",
            "error_type",
            "retry_count"
          ]
        }
      ]
    },
    "metrics": [
      {
        "name": "jobs_discovered_total",
        "type": "counter",
        "description": "Total number of jobs discovered by platform",
        "alertThreshold": "< 200 jobs per week"
      },
      {
        "name": "ai_request_duration",
        "type": "histogram",
        "description": "Time taken for AI requests by provider",
        "alertThreshold": "> 10 seconds p95"
      },
      {
        "name": "ai_budget_usage",
        "type": "gauge",
        "description": "Current month AI spending in USD",
        "alertThreshold": "> $4.00 (80% of budget)"
      },
      {
        "name": "scraping_success_rate",
        "type": "gauge",
        "description": "Percentage of successful scraping attempts",
        "alertThreshold": "< 90%"
      },
      {
        "name": "application_response_rate",
        "type": "gauge",
        "description": "Percentage of applications receiving responses",
        "alertThreshold": "< 8% (below target)"
      }
    ],
    "tracing": {
      "implementation": "OpenTelemetry with console exporter for development",
      "traceContext": "Request IDs propagated via HTTP headers and Redis message metadata"
    },
    "alerting": {
      "channels": [
        "console logs",
        "email notifications"
      ],
      "criticalAlerts": [
        "AI budget exceeded",
        "Database connection lost",
        "All scraping services down",
        "Memory usage > 90%"
      ]
    }
  },
  "architecturalDecisions": [
    {
      "id": "ADR-001",
      "title": "Event-Driven Microservices Architecture",
      "status": "accepted",
      "context": "Need to handle long-running asynchronous operations (job scraping, AI processing) while maintaining responsive user experience and supporting independent scaling of different concerns",
      "optionsConsidered": [
        {
          "option": "Monolithic Architecture",
          "pros": [
            "Simpler deployment",
            "No network latency",
            "Easier debugging"
          ],
          "cons": [
            "Tight coupling",
            "Single point of failure",
            "Difficult to scale individual components"
          ]
        },
        {
          "option": "Event-Driven Microservices",
          "pros": [
            "Loose coupling",
            "Independent scaling",
            "Fault isolation",
            "Async processing"
          ],
          "cons": [
            "Increased complexity",
            "Network overhead",
            "Eventual consistency"
          ]
        }
      ],
      "decision": "Adopt event-driven microservices architecture with Redis Streams for inter-service communication",
      "rationale": "Enables asynchronous processing of long-running operations while maintaining responsive user experience and supporting independent scaling",
      "consequences": [
        "Increased operational complexity",
        "Need for distributed tracing",
        "Eventual consistency patterns required"
      ],
      "relatedReqs": [
        "REQ-019-NFR",
        "REQ-006-NFR",
        "REQ-033"
      ],
      "relatedDecisions": [
        "ADR-003",
        "ADR-004"
      ]
    },
    {
      "id": "ADR-002",
      "title": "Hybrid AI Architecture (Ollama + Claude)",
      "status": "accepted",
      "context": "Need to balance privacy requirements, cost constraints ($5/month budget), and quality requirements for AI-generated content",
      "optionsConsidered": [
        {
          "option": "Local Ollama Only",
          "pros": [
            "Complete privacy",
            "No API costs",
            "No external dependencies"
          ],
          "cons": [
            "Lower quality output",
            "Higher compute requirements",
            "Limited model selection"
          ]
        },
        {
          "option": "Claude API Only",
          "pros": [
            "High quality output",
            "Lower local compute",
            "Latest models"
          ],
          "cons": [
            "Privacy concerns",
            "API costs",
            "External dependency"
          ]
        },
        {
          "option": "Hybrid Approach",
          "pros": [
            "Privacy when needed",
            "Quality when budget allows",
            "Flexible cost management"
          ],
          "cons": [
            "Increased complexity",
            "Need for routing logic",
            "Multiple failure modes"
          ]
        }
      ],
      "decision": "Implement hybrid AI architecture with local Ollama as default and optional Claude API for premium features",
      "rationale": "Balances privacy requirements with quality needs while staying within budget constraints and giving users control over their data",
      "consequences": [
        "Need for AI request routing logic",
        "Budget tracking and management required",
        "Complexity in handling different AI providers"
      ],
      "relatedReqs": [
        "CON-002",
        "CON-003",
        "REQ-028",
        "REQ-029"
      ],
      "relatedDecisions": [
        "ADR-005"
      ]
    },
    {
      "id": "ADR-003",
      "title": "Docker Compose for Local Deployment",
      "status": "accepted",
      "context": "Need single-command startup, reproducible deployments, and zero infrastructure cost while supporting microservices architecture",
      "optionsConsidered": [
        {
          "option": "Kubernetes",
          "pros": [
            "Production-ready",
            "Advanced orchestration",
            "Auto-scaling"
          ],
          "cons": [
            "Complex setup",
            "Resource overhead",
            "Overkill for single-user"
          ]
        },
        {
          "option": "Docker Compose",
          "pros": [
            "Simple setup",
            "Single command deployment",
            "Good for development"
          ],
          "cons": [
            "Limited scaling",
            "No advanced orchestration",
            "Single host only"
          ]
        },
        {
          "option": "Serverless",
          "pros": [
            "Auto-scaling",
            "Pay per use",
            "No infrastructure management"
          ],
          "cons": [
            "Vendor lock-in",
            "Cold starts",
            "Not suitable for long-running scraping"
          ]
        }
      ],
      "decision": "Use Docker Compose for local containerized deployment",
      "rationale": "Meets single-command startup requirement, zero infrastructure cost constraint, and provides sufficient orchestration for MVP",
      "consequences": [
        "Limited to single-host deployment",
        "Manual scaling required",
        "Suitable for development and single-user production"
      ],
      "relatedReqs": [
        "CON-001",
        "REQ-001",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-001"
      ]
    },
    {
      "id": "ADR-004",
      "title": "Redis Streams for Event Bus",
      "status": "accepted",
      "context": "Need lightweight, Docker-deployable event bus that supports event sourcing patterns for job processing workflows",
      "optionsConsidered": [
        {
          "option": "RabbitMQ",
          "pros": [
            "Mature messaging",
            "Advanced routing",
            "Clustering support"
          ],
          "cons": [
            "More complex deployment",
            "Higher resource usage",
            "Overkill for MVP"
          ]
        },
        {
          "option": "Redis Streams",
          "pros": [
            "Lightweight",
            "Already using Redis for cache",
            "Event sourcing support",
            "Simple deployment"
          ],
          "cons": [
            "Less mature than dedicated message brokers",
            "Single point of failure",
            "Limited routing features"
          ]
        },
        {
          "option": "Apache Kafka",
          "pros": [
            "High throughput",
            "Durable",
            "Excellent for event sourcing"
          ],
          "cons": [
            "Complex setup",
            "High resource requirements",
            "Overkill for single-user"
          ]
        }
      ],
      "decision": "Use Redis Streams as the event bus for inter-service communication",
      "rationale": "Lightweight, Docker-deployable, supports event sourcing patterns needed for job processing workflows, and leverages existing Redis infrastructure",
      "consequences": [
        "Single point of failure for messaging",
        "Limited advanced routing features",
        "Suitable for MVP scale"
      ],
      "relatedReqs": [
        "REQ-033",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-001",
        "ADR-005"
      ]
    },
    {
      "id": "ADR-005",
      "title": "PostgreSQL as Primary Database",
      "status": "accepted",
      "context": "Need ACID transactions for complex job and application relationships, full-text search capabilities, and local deployment without external dependencies",
      "optionsConsidered": [
        {
          "option": "MongoDB",
          "pros": [
            "Flexible schema",
            "JSON native",
            "Horizontal scaling"
          ],
          "cons": [
            "Eventual consistency",
            "No ACID across documents",
            "Less mature full-text search"
          ]
        },
        {
          "option": "PostgreSQL",
          "pros": [
            "ACID transactions",
            "JSONB support",
            "Full-text search",
            "Mature ecosystem",
            "Local deployment"
          ],
          "cons": [
            "Relational model complexity",
            "Vertical scaling limitations"
          ]
        },
        {
          "option": "SQLite",
          "pros": [
            "Zero configuration",
            "File-based",
            "ACID transactions"
          ],
          "cons": [
            "No concurrent writes",
            "Limited scalability",
            "No network access"
          ]
        }
      ],
      "decision": "Use PostgreSQL as the primary database for all structured data",
      "rationale": "Provides ACID transactions for complex relationships, JSONB support for flexible schema, full-text search capabilities, and supports local deployment",
      "consequences": [
        "Single database instance for all services",
        "Need for connection pooling",
        "Potential performance bottleneck at scale"
      ],
      "relatedReqs": [
        "CON-002",
        "REQ-002",
        "REQ-003",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-006"
      ]
    },
    {
      "id": "ADR-006",
      "title": "Local File Storage for User Data",
      "status": "accepted",
      "context": "Privacy-first architecture requires all user data to stay local, with zero infrastructure cost and simple backup/version control",
      "optionsConsidered": [
        {
          "option": "Cloud Blob Storage (S3, Azure Blob)",
          "pros": [
            "Scalable",
            "Durable",
            "CDN integration"
          ],
          "cons": [
            "Privacy concerns",
            "Infrastructure cost",
            "External dependency"
          ]
        },
        {
          "option": "Local File System",
          "pros": [
            "Complete privacy",
            "Zero cost",
            "Simple backup",
            "Version control friendly"
          ],
          "cons": [
            "Single point of failure",
            "Limited scalability",
            "Manual backup required"
          ]
        },
        {
          "option": "Network Attached Storage",
          "pros": [
            "Shared access",
            "Better durability than local"
          ],
          "cons": [
            "Additional infrastructure",
            "Cost",
            "Complexity"
          ]
        }
      ],
      "decision": "Use local file system for all file storage with structured directory organization",
      "rationale": "Meets privacy-first requirement, zero infrastructure cost, enables simple backup and version control, sufficient for single-user deployment",
      "consequences": [
        "Manual backup responsibility",
        "Storage limited by local disk",
        "No automatic redundancy"
      ],
      "relatedReqs": [
        "CON-002",
        "CON-001",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-005"
      ]
    },
    {
      "id": "ADR-007",
      "title": "Environment-Based Authentication",
      "status": "accepted",
      "context": "Single-user localhost deployment eliminates need for user authentication while maintaining security for service-to-service communication",
      "optionsConsidered": [
        {
          "option": "JWT-based Authentication",
          "pros": [
            "Industry standard",
            "Stateless",
            "Scalable"
          ],
          "cons": [
            "Unnecessary complexity for single user",
            "Token management overhead"
          ]
        },
        {
          "option": "OAuth 2.0 / OIDC",
          "pros": [
            "Secure",
            "Standard protocol",
            "Third-party integration"
          ],
          "cons": [
            "Overkill for localhost",
            "External dependencies",
            "Complex setup"
          ]
        },
        {
          "option": "Environment-based Shared Secrets",
          "pros": [
            "Simple",
            "Sufficient for localhost",
            "No user management"
          ],
          "cons": [
            "Not scalable to multi-user",
            "Shared secret management"
          ]
        }
      ],
      "decision": "Use environment-based shared secrets for service-to-service authentication with no user authentication",
      "rationale": "Single-user localhost deployment eliminates authentication complexity while maintaining data privacy and service security",
      "consequences": [
        "Not suitable for multi-user deployment",
        "Shared secret rotation required",
        "Trust-based authorization between services"
      ],
      "relatedReqs": [
        "CON-002",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-003"
      ]
    },
    {
      "id": "ADR-008",
      "title": "TypeScript Monorepo with pnpm Workspaces",
      "status": "accepted",
      "context": "Need consistent development experience, shared code reuse, and simplified dependency management across multiple microservices",
      "optionsConsidered": [
        {
          "option": "Separate Repositories per Service",
          "pros": [
            "Complete independence",
            "Separate versioning",
            "Team autonomy"
          ],
          "cons": [
            "Code duplication",
            "Dependency management complexity",
            "Inconsistent tooling"
          ]
        },
        {
          "option": "TypeScript Monorepo",
          "pros": [
            "Shared code reuse",
            "Consistent tooling",
            "Simplified dependency management",
            "Atomic changes"
          ],
          "cons": [
            "Potential coupling",
            "Larger repository",
            "Build complexity"
          ]
        },
        {
          "option": "Polyglot Microservices",
          "pros": [
            "Best tool for each job",
            "Team expertise utilization"
          ],
          "cons": [
            "Inconsistent development experience",
            "Multiple deployment pipelines",
            "Knowledge silos"
          ]
        }
      ],
      "decision": "Use TypeScript monorepo with pnpm workspaces for all services and shared libraries",
      "rationale": "Enables code reuse, consistent development experience, and simplified dependency management while maintaining service boundaries",
      "consequences": [
        "Need for workspace management",
        "Potential for unintended coupling",
        "Single build pipeline complexity"
      ],
      "relatedReqs": [
        "CON-003",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-009"
      ]
    },
    {
      "id": "ADR-009",
      "title": "Express.js for API Services",
      "status": "accepted",
      "context": "Need consistent API framework across all services that aligns with TypeScript monorepo decision and provides mature ecosystem",
      "optionsConsidered": [
        {
          "option": "FastAPI (Python)",
          "pros": [
            "Excellent async performance",
            "Automatic OpenAPI",
            "Type validation"
          ],
          "cons": [
            "Different language from frontend",
            "Additional deployment complexity",
            "Team expertise"
          ]
        },
        {
          "option": "Express.js (Node.js)",
          "pros": [
            "Consistent with TypeScript stack",
            "Mature ecosystem",
            "Familiar to team",
            "Extensive middleware"
          ],
          "cons": [
            "Callback-based by default",
            "Less built-in features",
            "Manual validation"
          ]
        },
        {
          "option": "NestJS",
          "pros": [
            "TypeScript native",
            "Decorator-based",
            "Built-in validation",
            "Microservices support"
          ],
          "cons": [
            "Learning curve",
            "More opinionated",
            "Heavier framework"
          ]
        }
      ],
      "decision": "Use Express.js with TypeScript for all API services",
      "rationale": "Aligns with TypeScript monorepo decision, provides mature ecosystem for REST APIs, and maintains consistency across services",
      "consequences": [
        "Manual validation and serialization",
        "Need for consistent middleware patterns",
        "Callback-based async patterns"
      ],
      "relatedReqs": [
        "CON-003",
        "REQ-035"
      ],
      "relatedDecisions": [
        "ADR-008"
      ]
    }
  ],
  "generationMetadata": {
    "comprehensiveness": "standard",
    "sectionsGenerated": [
      "systemOverview",
      "architecturePrinciples",
      "components",
      "integrationArchitecture",
      "dataArchitecture",
      "securityArchitecture",
      "deploymentArchitecture",
      "operationalConcerns",
      "architecturalDecisions"
    ],
    "totalLlmCalls": 6,
    "totalInputTokens": 82640,
    "totalOutputTokens": 32341,
    "generatedAt": "2026-02-18T10:54:44.252Z"
  },
  "createdAt": "2026-02-18T10:54:44.252Z",
  "updatedAt": "2026-02-18T10:54:44.252Z"
}